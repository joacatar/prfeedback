<!DOCTYPE html>
<html>
<head>
    <title>Peer Review Feedback</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2, h3 {
            margin-bottom: 10px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input[type="number"] {
            margin-bottom: 15px;
            padding: 5px;
        }
        form {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<!-- Page 1: Number Input -->
<div id="page1" style="display: block;">
    <h1>Peer Review Feedback</h1>
    <p>Please provide feedback for the planner's past work.</p>
    <label for="orderNumber">Order Number:</label>
    <input type="text" id="orderNumber" required>
    <br>
    <button onclick="showPage2()">Next</button>
</div>

<!-- Page 2: Name Selection -->
<div id="page2" style="display: none;">
    <h2>Peer Review for Planner</h2>
    <p>Order Number: <span id="displayOrderNumber"></span></p>
    <p>Provide feedback for:</p>
    <select id="name">
        <option value="chris.cronin@arthrex.com">ChrisC</option>
        <option value="angel.esquilin@arthrex.com">AngelP</option>
        <option value="ariel.cardenas@arthrex.com">ArielC</option>
        <option value="eloy.grela@arthrex.com">EloyG</option>
        <option value="rodik.figueroaecharri@arthrex.com">RodikF</option>
        <option value="stephen.choi@arthrex.com">StephenC</option>
        <option value="woodly.plancher@arthrex.com">WoodlyP</option>
        <option value="harver.borbon-mendez@arthrex.com">HarverBorbon</option>
        <option value="luis.cala@arthrex.com">LuisC</option>
        <option value="yaneisy.delgado@arthrex.com">YaneisyDelgado</option>
        <option value="sergio.barrera@arthrex.com">Sergio B</option>
        <option value="brian.keary@arthrex.com">BrianK</option>
        <option value="ruben.diaz@arthrex.com">RubenC</option>
        <option value="yaneilys.diaz@arthrex.com">YannyD</option>
        <option value="armando.becerra@arthrex.com">ArmandoB</option>
        <option value="jordan.trakas@arthrex.com">JordanT</option>
        <option value="ayberk.yagiz@arthrex.com">AyberkY</option>
        <option value="joao.tarirabarroso@arthrex.com">JoaoT</option>
        <option value="maddiel.martinez@arthrex.com">MaddielM</option>
        <option value="lyndale.chambers@arthrex.com">LyndaleC</option>
        <option value="matteo.mckinney@arthrex.com">MatteoM</option>
        <option value="daniel.valdescabrera@arthrex.com">DanielV</option>
        <option value="valerie.nolasco@arthrex.com">ValerieN</option>
        <option value="aaron.luther@arthrex.com">AaronL</option>
        <option value="juan.soundara@arthrex.com">CarlosS</option>
        <option value="stephany.valdesperez@arthrex.com">StephanyV</option>
        <option value="gabriela.pozotrujillo@arthrex.com">GabrielaP</option>
        <option value="fernando.cruzaguilar@arthrex.com">FernandoC</option>
        <option value="kevin.fusco@arthrex.com">KevinF</option>
        <!-- Add more options as needed -->
    </select>
    <br>
    <button onclick="showPage3()">Next</button>
</div>

<!-- Page 3: Segmentation Questions -->
<div id="page3" style="display: none;">
    <h2>Feedback Questionnaire</h2>
    <form onsubmit="showPage4(); return false;">
        <label>Question 1: How would you rate the planner's segmentation?</label><br>
        <select id="q1">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        <!-- <input type="radio" name="q1" value="Excellent"> Excellent<br>
        <input type="radio" name="q1" value="Good"> Good<br>
        <input type="radio" name="q1" value="Average"> Average<br>
        <input type="radio" name="q1" value="Needs Improvement"> Needs Improvement<br> -->
        </select>
        <br>
        <label>Question 2: Feedback comments?</label><br>
        <input type="checkbox" name="q2" value="Soft tissue still remained around glenoid rim"> Soft tissue still remained around glenoid rim<br>
        <input type="checkbox" name="q2" value="Soft tissue still remained on glenoid face"> Soft tissue still remained on glenoid face<br>
        <input type="checkbox" name="q2" value="Excessive soft tissue was around scapula"> Excessive soft tissue was around scapula<br>
        <input type="checkbox" name="q2" value="Light humeral head remained on glenoid"> Light humeral head remained on glenoid<br>
        <input type="checkbox" name="q2" value="Major humeral head remained on glenoid"> Major humeral head remained on glenoid<br>
        <input type="checkbox" name="q2" value="Better thresholding choice was available"> Better thresholding choice was available<br>
        <input type="checkbox" name="q2" value="Better cortex choice was available for choosing"> Better cortex choice was available for choosing<br>
        <br>
        <label for="segAdditionalComments">Additional comments?</label>
        <input type="text" id="segAdditionalComments">
        <button type="submit">Next</button>
    </form>
</div>

<!-- Page 4: Scapula Landmarks Questions Add glenoid landmarks and make it one-->
<div id="page4" style="display: none;">
    <h2>Scapula Landmarks QFeedback</h2>
    <form onsubmit="showPage5(); return false;">
        <label>Question 4: How would you rate the planner's Scapula Landmarking?</label><br>
        <select id="q4">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 5: Feedback comments?</label><br>
        <input type="checkbox" name="q5" value="Minor movement to glenoid center"> Minor movement to glenoid center<br>
        <input type="checkbox" name="q5" value="Minor movement to trigonum scapula"> Minor movement to trigonum scapula<br>
        <input type="checkbox" name="q5" value="Minor movement to angulus inferior"> Minor movement to angulus inferior<br>
        <input type="checkbox" name="q5" value="Glenoid Center only centered in one view"> Glenoid Center only centered in one view<br>
        <input type="checkbox" name="q5" value="Major movement to two or more landmarks"> Major movement to two or more landmarks<br>
        <br>
        <label for="q6">Additional comments?</label>
        <input type="text" id="q6">
        <br>
        <button type="submit">Next</button>
    </form>
</div>


<!-- Page 5: Email Template Add hyperlink, so it can send email through outlook-->
<div id="page5" style="display: none;">
    <h3>Peer Review Feedback for <span id="selectedNameEmail"></span></h3>
    <p>Order Number: <span id="displayOrderNumberEmail"></span></p>
    <p>Feedback:</p>
    <p><strong>Segmentation Rating:</strong> <span id="q1Response"></span></p>
    <p><strong>Segmentation comments:</strong> <span id="q2Response"></span></p>
    <p><strong>Additional Segmentation comments:</strong> <span id="segAdditionalCommentsResponse"></span></p>
    <p><strong>Scapula Landmarking Rating:</strong> <span id="q4Response"></span></p>
    <p><strong>Scapula Landmarking Comments:</strong> <span id="q5Response"></span></p>
    <p><strong>Scapula Landmarks Additional Comments:</strong> <span id="q6Response"></span></p>
    <button onclick="copyFeedback()">Copy Feedback</button>
    <p><a id="feedbackLink" href="javascript:void(0);" onclick="sendFeedbackByEmail();">Send Feedback by Email</a></p>
<button onclick="resetForm()">Start Over</button>
</div>

<script>
let selectedName = "";
let q1Response;
let q2Response;
let additionalCommentsResponse;
let q6Response;

// ... rest of your JavaScript code ...

function showPage2() {
    const orderNumber = document.getElementById("orderNumber").value;
    if (orderNumber) {
        document.getElementById("displayOrderNumber").textContent = orderNumber;
        document.getElementById("page1").style.display = "none";
        document.getElementById("page2").style.display = "block";
    } else {
        alert("Please enter an order number.");
    }
}

function showPage3() {
    selectedName = document.getElementById("name").value;
    document.getElementById("selectedNameEmail").textContent = selectedName;
    document.getElementById("displayOrderNumberEmail").textContent = document.getElementById("orderNumber").value;
    document.getElementById("page2").style.display = "none";
    document.getElementById("page3").style.display = "block";
}

function showPage4() {

    q1Response = document.getElementById('q1').value;
    q2Response = getSelectedCheckboxes('q2');
    additionalCommentsResponse = document.getElementById("segAdditionalComments").value;
    document.getElementById("page3").style.display = "none";
    document.getElementById("page4").style.display = "block";
}

function showPage5() {
    const q4Response = document.getElementById('q4').value;
    const q5Response = getSelectedCheckboxes('q5');
    q6Response = document.getElementById("q6").value;

    document.getElementById("q1Response").textContent = q1Response;
    document.getElementById("q2Response").textContent = q2Response;
    document.getElementById("segAdditionalCommentsResponse").textContent = additionalCommentsResponse;
    document.getElementById("q4Response").textContent = q4Response;
    document.getElementById("q5Response").textContent = q5Response;
    document.getElementById("q6Response").textContent = q6Response;
    document.getElementById("page4").style.display = "none";
    document.getElementById("page5").style.display = "block";
}

function getSelectedCheckboxes(name) {
    const checkboxes = document.querySelectorAll('input[name="' + name + '"]:checked');
    const selectedValues = Array.from(checkboxes).map(checkbox => checkbox.value);
    return selectedValues.join(', ');
}

function copyFeedback() {
    var feedback = "";
    feedback += "Peer Review Feedback for " + document.getElementById("selectedNameEmail").textContent + "\n";
    feedback += "Order Number: " + document.getElementById("displayOrderNumberEmail").textContent + "\n";
    feedback += "Feedback:\n";
    feedback += "Communication Skills: " + document.getElementById("q1Response").textContent + "\n";
    feedback += "Meeting Deadlines: " + document.getElementById("q2Response").textContent + "\n";
    feedback += "Additional Comments: " + document.getElementById("additionalCommentsResponse").textContent + "\n";
    //const feedback = document.getElementById("page4").innerText;
    // You can implement the copy functionality here
    // For example: navigator.clipboard.writeText(feedback);
    //alert("Feedback copied to clipboard!");
}

function resetForm() {
    document.getElementById("page1").style.display = "block";
    document.getElementById("page2").style.display = "none";
    document.getElementById("page3").style.display = "none";
    document.getElementById("page4").style.display = "none";
    document.getElementById("orderNumber").value = "";
    selectedName = "";
}

function generateFeedbackTemplate() {
  const feedback = `
      Peer Review Feedback for ${selectedName}
      
      Order Number: ${orderNumber}
      
      Feedback:
      Segmentation Rating: ${q1Response}
      Segmentation Comments: ${q2Response}
      Additional Segmentation Comments: ${additionalCommentsResponse}
      
      Scapula Landmarking Rating: ${q4Response}
      Scapula Landmarking Comments: ${q5Response}
      Scapula Landmarks Additional Comments: ${q6Response}
    `;
  return feedback;
}

function sendFeedbackByEmail() {
  const feedbackTemplate = generateFeedbackTemplate();
  const subject = encodeURIComponent("Peer Review Feedback");
  const body = encodeURIComponent(feedbackTemplate);
  
  const mailtoLink = `mailto:${selectedName}?subject=${subject}&body=${body}`;
  window.location.href = mailtoLink;
}
</script>

</body>
</html>
