<!DOCTYPE html>
<html>
<head>
    <title>Peer Review Feedback</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }
        h1, h2, h3 {
            margin-bottom: 10px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        select, input[type="number"] {
            margin-bottom: 15px;
            padding: 5px;
        }
        form {
            margin-top: 20px;
        }
        button {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>

<!-- Page 1: Number Input -->
<div id="page1" style="display: block;">
    <h1>Peer Review Feedback</h1>
    <p>Please provide feedback for the planner's past work.</p>
    <label for="orderNumber">Order Number:</label>
    <input type="text" id="orderNumber" required>
    <br>
    <button onclick="showPage2()">Next</button>
</div>

<!-- Page 2: Name Selection -->
<div id="page2" style="display: none;">
    <h2>Peer Review for Planner</h2>
    <p>Order Number: <span id="displayOrderNumber"></span></p>
    <p>Provide feedback for:</p>
    <select id="name">
        <option value="chris.cronin@arthrex.com">ChrisC</option>
        <option value="angel.esquilin@arthrex.com">AngelP</option>
        <option value="ariel.cardenas@arthrex.com">ArielC</option>
        <option value="eloy.grela@arthrex.com">EloyG</option>
        <option value="rodik.figueroaecharri@arthrex.com">RodikF</option>
        <option value="stephen.choi@arthrex.com">StephenC</option>
        <option value="woodly.plancher@arthrex.com">WoodlyP</option>
        <option value="harver.borbon-mendez@arthrex.com">HarverBorbon</option>
        <option value="luis.cala@arthrex.com">LuisC</option>
        <option value="yaneisy.delgado@arthrex.com">YaneisyDelgado</option>
        <option value="sergio.barrera@arthrex.com">Sergio B</option>
        <option value="brian.keary@arthrex.com">BrianK</option>
        <option value="ruben.diaz@arthrex.com">RubenC</option>
        <option value="yaneilys.diaz@arthrex.com">YannyD</option>
        <option value="armando.becerra@arthrex.com">ArmandoB</option>
        <option value="jordan.trakas@arthrex.com">JordanT</option>
        <option value="ayberk.yagiz@arthrex.com">AyberkY</option>
        <option value="joao.tarirabarroso@arthrex.com">JoaoT</option>
        <option value="maddiel.martinez@arthrex.com">MaddielM</option>
        <option value="lyndale.chambers@arthrex.com">LyndaleC</option>
        <option value="matteo.mckinney@arthrex.com">MatteoM</option>
        <option value="daniel.valdescabrera@arthrex.com">DanielV</option>
        <option value="valerie.nolasco@arthrex.com">ValerieN</option>
        <option value="aaron.luther@arthrex.com">AaronL</option>
        <option value="juan.soundara@arthrex.com">CarlosS</option>
        <option value="stephany.valdesperez@arthrex.com">StephanyV</option>
        <option value="gabriela.pozotrujillo@arthrex.com">GabrielaP</option>
        <option value="fernando.cruzaguilar@arthrex.com">FernandoC</option>
        <option value="kevin.fusco@arthrex.com">KevinF</option>
        <!-- Add more options as needed -->
    </select>
    <br>
    <button onclick="showPage3()">Next</button>
</div>

<!-- Page 3: Documentation Questions -->
<div id="page3" style="display: none;">
    <h2>Documentation Feedback Questionnaire</h2>
    <form onsubmit="showPage4(); return false;">
        <label>Question 1: How would you rate the planner's selection of scan?</label><br>
        <select id="q1">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 2: Scan Selection Feedback comments?</label><br>
        <input type="checkbox" name="q2" value="Good or best scan choice chosen by planner"> Good or best scan choice chosen by planner<br>
        <input type="checkbox" name="q2" value="Better scan choice available to have chosen"> Better scan choice available to have chosen<br>
        <input type="checkbox" name="q2" value="Scan is a rejection and cannot be planned with"> Scan is a rejection and cannot be planned with<br>
        <br>
        <label>Question 3: How would you rate the planner's rider form?</label><br>
        <select id="q3">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 4: Rider Form Feedback comments?</label><br>
        <input type="checkbox" name="q4" value="Rider form reflects all correct information and is completely filled out"> Rider form reflects all correct information and is completely filled out<br>
        <input type="checkbox" name="q4" value="Rider form is missing a few fields of information or is not signed"> Rider form is missing a few fields of information or is not signed<br>
        <br>
        <label for="q5">Question 5: Additional documentation comments?</label>
        <input type="text" id="q5">
        <button type="submit">Next</button>
    </form>
</div>
  
<!-- Page 4: Segmentation Edits Questions -->
<div id="page4" style="display: none;">
    <h2>Segmentation Feedback Questionnaire</h2>
    <form onsubmit="showPage5(); return false;">
        <label>Question 6: How would you rate the planner's segmentation?</label><br>
        <select id="q6">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 7: Segmentation Feedback comments?</label><br>
        <input type="checkbox" name="q7" value="Soft tissue still remained around glenoid rim"> Soft tissue still remained around glenoid rim<br>
        <input type="checkbox" name="q7" value="Soft tissue still remained on glenoid face"> Soft tissue still remained on glenoid face<br>
        <input type="checkbox" name="q7" value="Excessive soft tissue was around scapula"> Excessive soft tissue was around scapula<br>
        <input type="checkbox" name="q7" value="Light humeral head remained on glenoid"> Light humeral head remained on glenoid<br>
        <input type="checkbox" name="q7" value="Major humeral head remained on glenoid"> Major humeral head remained on glenoid<br>
        <input type="checkbox" name="q7" value="Better thresholding choice was available"> Better thresholding choice was available<br>
        <input type="checkbox" name="q7" value="Better cortex choice was available for choosing"> Better cortex choice was available for choosing<br>
        <br>
        <label for="q8">Question 8: Additional segmentation comments?</label>
        <input type="text" id="q8">
        <button type="submit">Next</button>
    </form>
</div>

<!-- Page 5: Scapula Landmarks Questions Add glenoid landmarks and make it one-->
<div id="page5" style="display: none;">
    <h2>Scapula Landmarks Feedback Questionnaire</h2>
    <form onsubmit="showPage6(); return false;">
        <label>Question 9: How would you rate the planner's Scapula Landmarking?</label><br>
        <select id="q9">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 10: Scapula Landmarking Feedback comments?</label><br>
        <input type="checkbox" name="q10" value="Minor movement to glenoid center"> Minor movement to glenoid center<br>
        <input type="checkbox" name="q10" value="Minor movement to trigonum scapula"> Minor movement to trigonum scapula<br>
        <input type="checkbox" name="q10" value="Minor movement to angulus inferior"> Minor movement to angulus inferior<br>
        <input type="checkbox" name="q10" value="Glenoid Center only centered in one view"> Glenoid Center only centered in one view<br>
        <input type="checkbox" name="q10" value="Major movement to two or more landmarks"> Major movement to two or more landmarks<br>
        <br>
        <label>Question 11: How would you rate the planner's Glenoid Landmarking?</label><br>
        <select id="q11">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 12: Glenoid Landmarking Feedback comments?</label><br>
        <input type="checkbox" name="q12" value="Minor movment of anterior or posterior glenoid rim landmark"> Minor movment of anterior or posterior glenoid rim landmark<br>
        <input type="checkbox" name="q12" value="Minor movment of superior glenoid rim landmark"> Minor movment of superior glenoid rim landmark<br>
        <input type="checkbox" name="q12" value="Glenoid plane too expanded on glenoid"> Glenoid plane too expanded on glenoid<br>
        <input type="checkbox" name="q12" value="Glenoid plane too cramped on glenoid"> Glenoid plane too cramped on glenoid<br>
        <input type="checkbox" name="q12" value="Major change to version"> Major change to version<br>
        <input type="checkbox" name="q12" value="Major change to inclination"> Major change to inclination<br>
        <input type="checkbox" name="q12" value="Reset glenoid plane landmarks to new locations"> Reset glenoid plane landmarks to new locations<br>
        <input type="checkbox" name="q12" value="Forgot to set some coracoid / acromion / scapular neck landmarks"> Forgot to set some coracoid / acromion / scapular neck landmarks<br>
        <br>
        <label for="q13">Question 13: Scapula Landmarking Additional comments?</label>
        <input type="text" id="q13">
        <br>
        <button type="submit">Next</button>
    </form>
</div>

<!-- Page 6: Humeral Landmark Questions-->
<div id="page6" style="display: none;">
    <h2>Humeral Landmarks Feedback Questionnaire</h2>
    <form onsubmit="showPage7(); return false;">
        <label>Question 14: How would you rate the planner's Humeral Landmarking?</label><br>
        <select id="q14">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 15: Humeral Landmark Feedback comments?</label><br>
        <input type="checkbox" name="q5" value="Minor correction to humeral shaft"> Minor correction to humeral shaft<br>
        <input type="checkbox" name="q5" value="Major correction to humeral shaft"> Major correction to humeral shaft<br>
        <input type="checkbox" name="q5" value="Humeral plane directed more through humeral head or changed Neck Shaft Angle"> Humeral plane directed more through humeral head or changed Neck Shaft Angle<br>
        <input type="checkbox" name="q5" value="Slight change to other humeral landmarks"> Slight change to other humeral landmarks<br>
        <input type="checkbox" name="q5" value="Forgot to place one or more other humeral landmarks"> Forgot to place one or more other humeral landmarks<br>
        <input type="checkbox" name="q5" value="Humeral head size reduced or increased"> Humeral head size reduced or increased<br>
        <br>
        <label for="q16">Question 16: Additional comments?</label>
        <input type="text" id="q16">
        <br>
        <button type="submit">Next</button>
    </form>
</div>

<!-- Page 7: Humeral Head Implant Questions-->
<div id="page7" style="display: none;">
    <h2>Humeral Implant Feedback Questionnaire</h2>
    <form onsubmit="showPage8(); return false;">
        <label>Question 17: How would you rate the planner's Humeral Implant?</label><br>
        <select id="q17">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 18: Humeral Implant Feedback comments?</label><br>
        <input type="checkbox" name="q18" value="Humeral stem selection not appropiate for anatomy"> Humeral stem selection not appropiate for anatomy<br>
        <input type="checkbox" name="q18" value="Sample input"> Sample input<br>
        <input type="checkbox" name="q18" value="Sample input"> Sample input<br>
        <input type="checkbox" name="q18" value="Sample input"> Sample input<br>
        <input type="checkbox" name="q18" value="Sample input"> Sample input<br>
        <br>
        <label for="q19">Question 19: Humeral Implant Additional comments?</label>
        <input type="text" id="q19">
        <br>
        <button type="submit">Next</button>
    </form>
</div>

<!-- Page 8: Glenoid Implant Questions-->
<div id="page8" style="display: none;">
    <h2>Glenoid Implant Feedback Questionnaire</h2>
    <form onsubmit="showPage9(); return false;">
        <label>Question 20: How would you rate the planner's Glenoid Implant?</label><br>
        <select id="q20">
          <option value="Excellent">Excellent</option>
          <option value="Good">Good</option>
          <option value="Average">Average</option>
          <option value="Needs Improvement">Needs Improvement</option>
        </select>
        <br>
        <label>Question 21: Glenoid Implant Feedback comments?</label><br>
        <input type="checkbox" name="q21" value="Rolled to better superior implant trajectory"> Rolled to better superior implant trajectory<br>
        <input type="checkbox" name="q21" value="Implant version changed"> Implant version changed<br>
        <input type="checkbox" name="q21" value="Implant inclination changed"> Implant inclination changed<br>
        <input type="checkbox" name="q21" value="Implant downsizing unnecessary"> Implant downsizing unnecessary<br>
        <input type="checkbox" name="q21" value="Perforated a polyethylene component(VL)"> Perforated a polyethylene component(VL)<br>
        <input type="checkbox" name="q21" value="Medialized slightly too deep into glenoid"> Medialized slightly too deep into glenoid<br>
        <input type="checkbox" name="q21" value="Able to achieve 100% backside seating"> Able to achieve 100% backside seating<br>
        <br>
        <label for="q22">Question 22: Glenoid Implant Additional comments?</label>
        <input type="text" id="q22">
        <br>
        <button type="submit">Next</button>
    </form>
</div>

<!-- Page 9: Email Template Add hyperlink, so it can send email through outlook-->
<div id="page9" style="display: none;">
    <h3>Peer Review Feedback for <span id="selectedNameEmail"></span></h3>
    <p>Order Number: <span id="displayOrderNumberEmail"></span></p>
    <p>Feedback:</p>
    <br>
    <ul id="feedbackList"></ul>
    <button onclick="copyFeedback()">Copy Feedback</button>
    <p><a id="feedbackLink" href="javascript:void(0);" onclick="sendFeedbackByEmail();">Send Feedback by Email</a></p>
<button onclick="resetForm()">Start Over</button>
</div>

<script>
let selectedName = "";
let responses = []
let ONumber ="";


function showPage2() {
    const orderNumber = document.getElementById("orderNumber").value;
    if (orderNumber) {
        document.getElementById("displayOrderNumber").textContent = orderNumber;
        ONumber = orderNumber
        document.getElementById("page1").style.display = "none";
        document.getElementById("page2").style.display = "block";
    } else {
        alert("Please enter an order number.");
    }
}

function showPage3() {
    selectedName = document.getElementById("name").value;
    document.getElementById("selectedNameEmail").textContent = selectedName;
    document.getElementById("displayOrderNumberEmail").textContent = document.getElementById("orderNumber").value;
    document.getElementById("page2").style.display = "none";
    document.getElementById("page3").style.display = "block";
}

function showPage4() {
    q1Response = document.getElementById('q1').value;
    q2Response = getSelectedCheckboxes('q2');
    q3Response = document.getElementById('q3').value;
    q4Response = getSelectedCheckboxes('q4');
    q5Response = document.getElementById("q5").value;
    responses.push({
      type:"Documentation Feedback",
      Scan_rating: q1Response,
      Scan_comments: q2Response,
      Rider_rating: q3Response,
      Rider_comments: q4Response,
      Documentation_add_comments: q5Response
    })
    document.getElementById("page3").style.display = "none";
    document.getElementById("page4").style.display = "block";
}

function showPage5() {
    q6Response = document.getElementById('q6').value;
    q7Response = getSelectedCheckboxes('q7');
    q8Response = document.getElementById("q8").value;
    responses.push({
        type: "Segmentation Feedback",
        Segmentation_rating: q6Response,
        Segmentation_comments: q7Response,
        Segmentation_add_comments: q8Response
    });
    document.getElementById("page4").style.display = "none";
    document.getElementById("page5").style.display = "block";
}

function showPage6() {
    q9Response = document.getElementById('q9').value;
    q10Response = getSelectedCheckboxes('q10');
    q11Response = document.getElementById('q11').value;
    q12Response = getSelectedCheckboxes('q12');
    q13Response = document.getElementById("q13").value;
    responses.push({
        type: "Scapula Landmarks Feedback",
        Scapula_landmark_rating: q9Response,
        Scapula_landmark_comments: q10Response,
        Glenoid_landmark_rating: q11Response,
        Glenoid_landmark_comments: q12Response,
        Scapula_landmark_add_comments: q13Response
    });
    document.getElementById("page5").style.display = "none";
    document.getElementById("page6").style.display = "block";
}

function showPage7() {
    q14Response = document.getElementById('q9').value;
    q15Response = getSelectedCheckboxes('q10');
    q16Response = document.getElementById('q11').value;
    responses.push({
        type: "Humeral Landmarks Feedback",
        Humeral_landmark_rating: q9Response,
        Humeral_landmark_comments: q10Response,
        Humeral_landmark_add_comments: q11Response,
    });
    document.getElementById("page6").style.display = "none";
    document.getElementById("page7").style.display = "block";
}

function showPage8() {
    q17Response = document.getElementById('q9').value;
    q18Response = getSelectedCheckboxes('q10');
    q19Response = document.getElementById('q11').value;
    responses.push({
        type: "Humeral Implant Feedback",
        Humeral_implant_rating: q17Response,
        Humeral_implant_comments: q18Response,
        Humeral_implant_add_comments: q19Response,
    });
    document.getElementById("page7").style.display = "none";
    document.getElementById("page8").style.display = "block";
}

function showPage9() {
    q20Response = document.getElementById('q9').value;
    q21Response = getSelectedCheckboxes('q10');
    q22Response = document.getElementById('q11').value;
    responses.push({
        type: "Glenoid Implant Feedback",
        Glenoid_implant_rating: q9Response,
        Glenoid_implant_comments: q10Response,
        Glenoid_implant_add_comments: q13Response
    });
    document.getElementById("page8").style.display = "none";
    document.getElementById("page9").style.display = "block";
  
    const feedbackList = document.getElementById("feedbackList");
    feedbackList.innerHTML = ""; 

    for (const response of responses) {
        const listItem = document.createElement("li");
        listItem.innerHTML = `<strong>${response.type}:</strong>`;
        feedbackList.appendChild(listItem);

        for (const key in response) {
            if (key !== "type") {
                const subListItem = document.createElement("li");
                subListItem.innerHTML = `<strong>${key}:</strong> <br>${response[key]}`;
                feedbackList.appendChild(subListItem);
            }
        }
    const separator = document.createElement("hr");
    feedbackList.appendChild(separator);
    }
}

function getSelectedCheckboxes(name) {
    const checkboxes = document.querySelectorAll('input[name="' + name + '"]:checked');
    const selectedValues = Array.from(checkboxes).map(checkbox => checkbox.value);
    return selectedValues.join(', ');
}

function copyFeedback() {
    // Select the content of the page 9
    var feedbackContent = document.getElementById("page9").innerText;

    // Create a temporary textarea element to hold the content
    var textarea = document.createElement("textarea");
    textarea.value = feedbackContent;

    // Append the textarea to the document
    document.body.appendChild(textarea);

    // Select the content of the textarea
    textarea.select();

    // Copy the selected content to the clipboard
    document.execCommand("copy");

    // Remove the temporary textarea
    document.body.removeChild(textarea);

    // Optionally, provide feedback to the user
    alert("Feedback copied to clipboard!");
}


function resetForm() {
    document.getElementById("page1").style.display = "block";
    document.getElementById("page2").style.display = "none";
    document.getElementById("page3").style.display = "none";
    document.getElementById("page4").style.display = "none";
    document.getElementById("page5").style.display = "none";
    document.getElementById("page6").style.display = "none";
    document.getElementById("page7").style.display = "none";
    document.getElementById("page8").style.display = "none";
    document.getElementById("page9").style.display = "none";
    document.getElementById("orderNumber").value = "";
    selectedName = "";
}

function generateFeedbackTemplate() {
    let feedback = "";
    feedback += 'Peer review Feedback for order number: '+ ONumber + '\n\n';

    for (const response of responses) {
        feedback += response.type + ":\n";
        for (const key in response) {
            if (key !== "type" && response[key]) {
                feedback += key + ": " + response[key] + "\n";
            }
        }
        feedback += "\n"; // Add space after each section
    }
    return feedback;
}

function sendFeedbackByEmail() {
  const feedbackTemplate = generateFeedbackTemplate();
  const subject = encodeURIComponent("Peer Review Feedback");
  const body = encodeURIComponent(feedbackTemplate);
  
  const mailtoLink = `mailto:${selectedName}?subject=${subject}&body=${body}`;
  window.location.href = mailtoLink;
}
</script>

</body>
</html>
